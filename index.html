<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€ç°¡æ­¥æ•¸è¨˜éŒ„å™¨</title>
    <style>
        /* åƒç…§ä¸Šæ–¹ CSS ç°¡åŒ–éƒ¨åˆ† */
        :root { --primary-color: #4CAF50; }
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        #step-count-display { font-size: 4em; color: var(--primary-color); margin-bottom: 20px; }
        input[type="number"], button { padding: 10px; margin: 5px; }
        button { background-color: var(--primary-color); color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <h1>ğŸ‘£ ä»Šæ—¥æ­¥æ•¸ï¼š</h1>
    <div id="step-count-display">0</div>

    <hr>

    <h2>è¨˜éŒ„æ–°æ­¥æ•¸</h2>
    <input type="number" id="step-input" placeholder="è¼¸å…¥ä»Šæ—¥ç¸½æ­¥æ•¸" min="0">
    <button onclick="recordSteps()">è¨˜éŒ„</button>

    <hr>

    <h2>æ­·å²è¨˜éŒ„</h2>
    <ul id="history-list">
        </ul>

    <script>
        const STORAGE_KEY = 'simpleStepsTracker';

        /**
         * å–å¾—ä»Šæ—¥æ—¥æœŸ (YYYY-MM-DD æ ¼å¼)
         */
        function getTodayDate() {
            return new Date().toISOString().split('T')[0];
        }

        /**
         * å¾ LocalStorage è¼‰å…¥æ‰€æœ‰æ•¸æ“š
         */
        function loadData() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : {};
        }

        /**
         * å°‡æ•¸æ“šå„²å­˜åˆ° LocalStorage
         * @param {object} data - æ­¥æ•¸æ•¸æ“šå°è±¡
         */
        function saveData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        /**
         * è¨˜éŒ„æˆ–æ›´æ–°ä»Šæ—¥æ­¥æ•¸
         */
        function recordSteps() {
            const inputElement = document.getElementById('step-input');
            const steps = parseInt(inputElement.value);

            if (isNaN(steps) || steps < 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„æ­¥æ•¸ï¼');
                return;
            }

            const today = getTodayDate();
            const data = loadData();

            // æ›´æ–°ä»Šæ—¥çš„æ­¥æ•¸
            data[today] = steps;

            saveData(data);
            renderUI(data);
            inputElement.value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†
        }

        /**
         * æ¸²æŸ“ä»‹é¢ï¼šé¡¯ç¤ºä»Šæ—¥æ­¥æ•¸å’Œæ­·å²è¨˜éŒ„
         * @param {object} data - æ­¥æ•¸æ•¸æ“šå°è±¡
         */
        function renderUI(data) {
            const today = getTodayDate();
            const todaySteps = data[today] || 0;

            // 1. é¡¯ç¤ºä»Šæ—¥æ­¥æ•¸
            document.getElementById('step-count-display').textContent = todaySteps.toLocaleString();

            // 2. æ¸²æŸ“æ­·å²è¨˜éŒ„
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = ''; // æ¸…ç©ºèˆŠåˆ—è¡¨

            // ä¾æ—¥æœŸæ’åº (å¾æ–°åˆ°èˆŠ)
            const sortedDates = Object.keys(data).sort((a, b) => new Date(b) - new Date(a));

            sortedDates.forEach(date => {
                const li = document.createElement('li');
                li.textContent = `${date}: ${data[date].toLocaleString()} æ­¥`;
                historyList.appendChild(li);
            });
        }

        // åˆå§‹åŒ–ç¶²ç«™æ™‚è¼‰å…¥ä¸¦æ¸²æŸ“æ•¸æ“š
        const initialData = loadData();
        renderUI(initialData);

    </script>
</body>
</html>
